import{C as N}from"./clinic-team-endpoint.08333932.js";import{af as F,ab as A,ac as z,ad as U,ae as P,ao as Q,r as E,ap as D,R as L,at as k,j as g,S as p,a as r,g as H,B as v,T as y,n as M,U as W,A as R,au as j,av as B,aw as $,ax as S,C as x,f as w,bI as K,ay as X,az as J}from"./index.b3b82eb3.js";import{P as Y,C as Z}from"./patient-endpoint.36464126.js";import{m as b,g as V}from"./confirm-password.validation.fea8be59.js";import{p as ee,u as O}from"./profile.validation.ad7e7eae.js";import{u as re,P as oe}from"./table.1bced37e.js";import{a as ne,C as ae}from"./form.5084ebc2.js";import{F as te}from"./file-upload.7eb0e642.js";const ie=e=>P({url:N.ASSIGN_PATIENT_TO_DOCTOR,method:"POST",data:e}),Ie=({configs:e}={})=>{const s=F();return A({mutationFn:ie,onSuccess(t,i){var d,o;!t.success||(d=t.data)!=null&&d.message&&(z("SUCCESS",(o=t.data)==null?void 0:o.message),s.refetchQueries([N.LIST]),s.refetchQueries([Y.DETAIL,i.user_id]),s.refetchQueries([N.LIST_PATIENT_ASSIGN_CLINIC]))},onError:t=>{U(t)},...e})};function le(e){return D(P({url:N.LIST_PATIENT_ASSIGN_CLINIC,method:"get",params:e}))}function se({configs:e,userId:s}){var I,C;const t=F(),{queryParams:i,...d}=re(),{data:o,...l}=Q({...e,queryFn:()=>le({user_id:s,...i}),queryKey:[N.LIST_PATIENT_ASSIGN_CLINIC,s,i]}),T=E.exports.useMemo(()=>{var f;return(f=o==null?void 0:o.patients)==null?void 0:f.data},[(I=o==null?void 0:o.patients)==null?void 0:I.data]),m=E.exports.useMemo(()=>{var f;return(f=o==null?void 0:o.patients)==null?void 0:f.paging},[(C=o==null?void 0:o.patients)==null?void 0:C.paging]);function u(){t.refetchQueries([N.LIST_PATIENT_ASSIGN_CLINIC,s,i])}return{queryParams:i,patientsListAssignDoctorARNP:T,patientsAssignDoctorARNPPaging:m,...d,...l,invalidateQueryGetListPatientListAssignDoctorARNP:u}}var G=(e=>(e[e.REGISTER=2]="REGISTER",e[e.DOCTOR=3]="DOCTOR",e[e.NURSE=4]="NURSE",e[e.ARNP=5]="ARNP",e))(G||{});const ce=ee.extend({role:b.nativeEnum(G,{invalid_type_error:"Role is required"}),country:b.string().optional().nullable(),state:b.string().optional().nullable(),city:b.string().optional().nullable(),zip_code:b.string().optional(),street:b.string().optional().nullable(),role_type:b.number().optional().nullable(),hospital:V("Hospital").max(255,"Hospital maximum 255 characters").nullable()}),Ce=ce.partial(),de=({info:e,onSelected:s,...t})=>g(p,{px:"16px",justify:"space-between",direction:"row",...t,children:[g(p,{direction:"row",align:"center",spacing:"12px",children:[r(R,{src:e.avatar}),r(y,{color:"secondary",sx:{fontWeight:"700",fontSize:"14px",lineHeight:"120%"},children:e.name})]}),r(p,{bg:e.checked?"primary":"neutral.300",h:"32px",w:"32px",rounded:"full",cursor:"pointer",align:"center",justify:"center",onClick:()=>s(e),children:r(Z,{})})]}),me=({info:e,onDeleteSelectItem:s})=>g(p,{px:3,py:2,align:"center",direction:"row",spacing:3,bg:"neutral.600",rounded:"4px",children:[r(y,{color:"primary",sx:{fontWeight:"700",fontSize:"12px",lineHeight:"120%"},children:e.name}),r(y,{cursor:"pointer",color:"neutral.300",fontSize:"12px",onClick:()=>s(e.id),children:"X"})]}),ue=5,ye=L.memo(({userId:e,onAssignIds:s})=>{var f,q;const{t}=O(["common","clinic"]),{patientsListAssignDoctorARNP:i,isLoading:d,queryParams:o,patientsAssignDoctorARNPPaging:l,setQuery:T}=se({userId:e,configs:{enabled:!!e}});E.exports.useEffect(()=>{var c;const n=(c=i==null?void 0:i.filter(({is_assigned:a})=>a).map(a=>{var _,h;return{avatar:a==null?void 0:a.avatar,id:(_=a==null?void 0:a.id)!=null?_:0,name:k({firstName:a==null?void 0:a.first_name,middleName:a==null?void 0:a.middle_name,lastName:a==null?void 0:a.last_name}),checked:(h=a.is_assigned)!=null?h:!1}}))!=null?c:[];u(a=>[...new Map(a.concat(n).map(_=>[_.id,_])).values()])},[i]);const[m,u]=E.exports.useState([]);E.exports.useEffect(()=>{s&&s(m)},[m,s]);const I=n=>{u(c=>{if(c.find(({id:h})=>h===n.id))return c.map(h=>h.id===n.id?{...h,checked:!h.checked}:h).filter(({checked:h})=>h);if(m.length===ue)return c;const _={...n,checked:!0};return[...c,_]})},C=n=>{u(c=>c.filter(a=>a.id!==n))};return g(p,{children:[r(H,{isDisabled:d,initValue:o==null?void 0:o.keyword,onHandleSearch:n=>{T({page:1,keyword:n})}}),m.length>0&&g(v,{children:[r(y,{sx:{fontWeight:"700",fontSize:"12px",lineHeight:"120%"},my:2,color:"neutral.300",children:`${t("clinic:form.selected")} (${m.length})`}),r(p,{direction:"row",align:"center",gap:2,flexFlow:"wrap",children:m.map((n,c)=>r(v,{pl:c===0?2:0,children:r(me,{info:n,onDeleteSelectItem:C})},n.id))})]}),g(M.Avatar,{isLoaded:!d,count:5,children:[g(p,{spacing:"16px",minH:"120px",children:[(i==null?void 0:i.length)&&g(W,{children:[r(y,{color:"neutral.300",sx:{fontWeight:"700",fontSize:"12px",lineHeight:"120%"},pt:"16px",textTransform:"uppercase",children:t("common:suggestion").toUpperCase()}),r(p,{spacing:"16px",children:i==null?void 0:i.map(n=>{var c,a;return r(de,{info:{avatar:n.avatar,id:n.id,name:k({firstName:n==null?void 0:n.first_name,middleName:n==null?void 0:n.middle_name,lastName:n==null?void 0:n.last_name}),checked:(a=(c=m.find(_=>_.id===n.id))==null?void 0:c.checked)!=null?a:!1},onSelected:I},n.id)})})]}),!(i!=null&&i.length)&&!d&&r(y,{textAlign:"center",fontWeight:"bold",my:"auto",fontSize:20,children:t("common:no_data")})]}),r(p,{direction:"row",mt:"4",justify:"flex-end",align:"center",spacing:"6",px:4,children:r(oe,{currentPage:(f=l==null?void 0:l.current_page)!=null?f:1,perPage:Number(l==null?void 0:l.per_page),totalCount:(q=l==null?void 0:l.total)!=null?q:1,onPageChange:n=>T({page:n})})})]})]})});function he(){const{t:e}=O(["common","clinic"]),s=ne(),{register:t,formState:i,control:d}=s,{errors:o,defaultValues:l,isSubmitting:T}=i,m=s.getValues("avatar")instanceof File?void 0:String(s.getValues("avatar"));return g(p,{children:[r(p,{direction:"row",spacing:6,align:"center",my:4,children:r(te,{initUrl:m,control:d,name:"avatar",error:o==null?void 0:o.avatar,trigger:()=>r(j,{w:"169px",color:"secondary",fontWeight:700,size:"lg",variant:"ghost",leftIcon:r(B,{}),isDisabled:T,children:e("common:upload_photo")}),children:u=>r(R,{boxSize:"100px",src:u})})}),g($,{templateColumns:"repeat(2, 1fr)",gap:4,children:[r(S,{colSpan:{base:2,xl:1},children:r(x,{isRequired:!0,label:e("common:info.first_name"),placeholder:e("common:info.form.enter_first_name"),error:o.first_name,registration:t("first_name")})}),r(S,{colSpan:{base:2,xl:1},children:r(x,{isRequired:!0,label:e("common:info.middle_name"),placeholder:e("common:info.form.enter_middle_name"),error:o.middle_name,registration:t("middle_name")})}),r(S,{colSpan:{base:2,xl:1},children:r(x,{isRequired:!0,label:e("common:info.last_name"),placeholder:e("common:info.form.enter_last_name"),error:o.last_name,registration:t("last_name")})}),r(S,{colSpan:{base:2,xl:1},children:r(w,{label:e("common:info.role"),isRequired:!0,placeholder:l!=null&&l.role_type?void 0:e("common:please_select"),options:K,error:o.role,registration:t("role",{valueAsNumber:!0}),isDisabled:!!(l!=null&&l.role_type)})}),r(S,{colSpan:{base:2,xl:1},children:r(w,{label:e("common:info.gender"),isRequired:!0,options:X,error:o.gender,placeholder:l!=null&&l.gender?void 0:e("common:please_select"),registration:t("gender",{valueAsNumber:!0})})}),r(S,{colSpan:{base:2,xl:1},children:r(x,{label:e("common:info.date_of_birth"),isRequired:!0,placeholder:e("common:info.form.enter_date"),type:"date",registration:t("birthday"),error:o.birthday})}),r(S,{colSpan:{base:2},children:r(ae,{name:"phone",control:d,render:({field:{value:u,onChange:I,...C}})=>r(x,{label:e("common:info.phone_number"),placeholder:"012-345-6789",isRequired:!0,error:o==null?void 0:o.phone,value:u!=null?u:"",maxLength:12,onChange:f=>{I(J(f.target.value))},...C})})}),r(S,{colSpan:2,children:r(x,{label:e("common:info.email"),isRequired:!0,placeholder:e("common:info.form.enter_email"),error:o.email,registration:t("email")})}),r(S,{colSpan:2,children:r(x,{label:e("common:info.hospital"),isRequired:!0,placeholder:e("common:info.form.enter_hospital"),error:o.hospital,registration:t("hospital")})})]})]})}const Ne=L.memo(he);export{ye as A,Ne as C,Ce as a,ce as c,Ie as u};
