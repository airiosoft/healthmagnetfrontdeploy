import{R as F,a as oe,r as Qe,B as kr}from"./index.b3b82eb3.js";var ue=e=>e.type==="checkbox",te=e=>e instanceof Date,M=e=>e==null;const sr=e=>typeof e=="object";var U=e=>!M(e)&&!Array.isArray(e)&&sr(e)&&!te(e),ir=e=>U(e)&&e.target?ue(e.target)?e.target.checked:e.target.value:e,Sr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ar=(e,t)=>e.has(Sr(t)),ie=e=>Array.isArray(e)?e.filter(Boolean):[],E=e=>e===void 0,c=(e,t,r)=>{if(!t||!U(e))return r;const s=ie(t.split(/[,[\].]+?/)).reduce((a,l)=>M(a)?a:a[l],e);return E(s)||s===e?E(e[t])?r:e[t]:s};const fe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},nr=F.createContext(null),me=()=>F.useContext(nr),Dr=e=>{const{children:t,...r}=e;return oe(nr.Provider,{value:r,children:t})};var ur=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(a,l,{get:()=>{const h=l;return t._proxyFormState[h]!==W.all&&(t._proxyFormState[h]=!s||W.all),r&&(r[h]=!0),e[h]}});return a},N=e=>U(e)&&!Object.keys(e).length,lr=(e,t,r)=>{const{name:s,...a}=e;return N(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!r||W.all))},j=e=>Array.isArray(e)?e:[e],or=(e,t,r)=>r&&t?e===t:!e||!t||e===t||j(e).some(s=>s&&(s.startsWith(t)||t.startsWith(s)));function be(e){const t=F.useRef(e);t.current=e,F.useEffect(()=>{const r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>{r&&r.unsubscribe()}},[e.disabled])}function Cr(e){const t=me(),{control:r=t.control,disabled:s,name:a,exact:l}=e||{},[h,d]=F.useState(r._formState),_=F.useRef(!0),p=F.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),w=F.useRef(a);return w.current=a,be({disabled:s,callback:F.useCallback(b=>_.current&&or(w.current,b.name,l)&&lr(b,p.current)&&d({...r._formState,...b}),[r,l]),subject:r._subjects.state}),F.useEffect(()=>(_.current=!0,()=>{_.current=!1}),[]),ur(h,r,p.current,!1)}var J=e=>typeof e=="string",cr=(e,t,r,s)=>{const a=Array.isArray(e);return J(e)?(s&&t.watch.add(e),c(r,e)):a?e.map(l=>(s&&t.watch.add(l),c(r,l))):(s&&(t.watchAll=!0),r)},de=e=>typeof e=="function",je=e=>{for(const t in e)if(de(e[t]))return!0;return!1};function Er(e){const t=me(),{control:r=t.control,name:s,defaultValue:a,disabled:l,exact:h}=e||{},d=F.useRef(s);d.current=s,be({disabled:l,subject:r._subjects.watch,callback:F.useCallback(w=>{if(or(d.current,w.name,h)){const b=cr(d.current,r._names,w.values||r._formValues);p(E(d.current)||U(b)&&!je(b)?{...b}:Array.isArray(b)?[...b]:E(b)?a:b)}},[r,h,a])});const[_,p]=F.useState(E(a)?r._getWatch(s):a);return F.useEffect(()=>r._removeUnmounted()),_}function Rr(e){const t=me(),{name:r,control:s=t.control,shouldUnregister:a}=e,l=ar(s._names.array,r),h=Er({control:s,name:r,defaultValue:c(s._formValues,r,c(s._defaultValues,r,e.defaultValue)),exact:!0}),d=Cr({control:s,name:r}),_=F.useRef(s.register(r,{...e.rules,value:h}));return F.useEffect(()=>{const p=(w,b)=>{const x=c(s._fields,w);x&&(x._f.mount=b)};return p(r,!0),()=>{const w=s._options.shouldUnregister||a;(l?w&&!s._stateFlags.action:w)?s.unregister(r):p(r,!1)}},[r,s,l,a]),{field:{name:r,value:h,onChange:F.useCallback(p=>_.current.onChange({target:{value:ir(p),name:r},type:fe.CHANGE}),[r]),onBlur:F.useCallback(()=>_.current.onBlur({target:{value:c(s._formValues,r),name:r},type:fe.BLUR}),[r,s]),ref:p=>{const w=c(s._fields,r);w&&p&&(w._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:b=>p.setCustomValidity(b),reportValidity:()=>p.reportValidity()})}},formState:d,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!c(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!c(d.touchedFields,r)},error:{enumerable:!0,get:()=>c(d.errors,r)}})}}const Gr=e=>e.render(Rr(e));var Or=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},qe=e=>/^\w*$/.test(e),fr=e=>ie(e.replace(/["|']|\]/g,"").split(/\.|\[/));function C(e,t,r){let s=-1;const a=qe(t)?[t]:fr(t),l=a.length,h=l-1;for(;++s<l;){const d=a[s];let _=r;if(s!==h){const p=e[d];_=U(p)||Array.isArray(p)?p:isNaN(+a[s+1])?{}:[]}e[d]=_,e=e[d]}return e}const ye=(e,t,r)=>{for(const s of r||Object.keys(e)){const a=c(e,s);if(a){const{_f:l,...h}=a;if(l&&t(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else U(h)&&ye(h,t)}}};var X=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},pe=(e,t,r={})=>r.shouldFocus||E(r.shouldFocus)?r.focusName||`${e}.${E(r.focusIndex)?t:r.focusIndex}.`:"",Me=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length)))),dr=(e,t,r)=>{const s=ie(c(e,r));return C(s,"root",t[r]),C(e,r,s),e},he=e=>typeof e=="boolean",We=e=>e.type==="file",ce=e=>J(e)||F.isValidElement(e),$e=e=>e.type==="radio",ge=e=>e instanceof RegExp;const Xe={value:!1,isValid:!1},Ye={value:!0,isValid:!0};var yr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!E(e[0].attributes.value)?E(e[0].value)||e[0].value===""?Ye:{value:e[0].value,isValid:!0}:Ye:Xe}return Xe};const Ze={isValid:!1,value:null};var hr=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Ze):Ze;function er(e,t,r="validate"){if(ce(e)||Array.isArray(e)&&e.every(ce)||he(e)&&!e)return{type:r,message:ce(e)?e:"",ref:t}}var re=e=>U(e)&&!ge(e)?e:{value:e,message:""},Be=async(e,t,r,s,a)=>{const{ref:l,refs:h,required:d,maxLength:_,minLength:p,min:w,max:b,pattern:x,validate:D,name:P,valueAsNumber:ee,mount:ae,disabled:G}=e._f;if(!ae||G)return{};const $=h?h[0]:l,H=v=>{s&&$.reportValidity&&($.setCustomValidity(he(v)?"":v||" "),$.reportValidity())},R={},Y=$e(l),A=ue(l),m=Y||A,V=(ee||We(l))&&!l.value||t===""||Array.isArray(t)&&!t.length,S=Or.bind(null,P,r,R),z=(v,k,L,B=Q.maxLength,K=Q.minLength)=>{const Z=v?k:L;R[P]={type:v?B:K,message:Z,ref:l,...S(v?B:K,Z)}};if(a?!Array.isArray(t)||!t.length:d&&(!m&&(V||M(t))||he(t)&&!t||A&&!yr(h).isValid||Y&&!hr(h).isValid)){const{value:v,message:k}=ce(d)?{value:!!d,message:d}:re(d);if(v&&(R[P]={type:Q.required,message:k,ref:$,...S(Q.required,k)},!r))return H(k),R}if(!V&&(!M(w)||!M(b))){let v,k;const L=re(b),B=re(w);if(!M(t)&&!isNaN(t)){const K=l.valueAsNumber||t&&+t;M(L.value)||(v=K>L.value),M(B.value)||(k=K<B.value)}else{const K=l.valueAsDate||new Date(t);J(L.value)&&(v=K>new Date(L.value)),J(B.value)&&(k=K<new Date(B.value))}if((v||k)&&(z(!!v,L.message,B.message,Q.max,Q.min),!r))return H(R[P].message),R}if((_||p)&&!V&&(J(t)||a&&Array.isArray(t))){const v=re(_),k=re(p),L=!M(v.value)&&t.length>v.value,B=!M(k.value)&&t.length<k.value;if((L||B)&&(z(L,v.message,k.message),!r))return H(R[P].message),R}if(x&&!V&&J(t)){const{value:v,message:k}=re(x);if(ge(v)&&!t.match(v)&&(R[P]={type:Q.pattern,message:k,ref:l,...S(Q.pattern,k)},!r))return H(k),R}if(D){if(de(D)){const v=await D(t),k=er(v,$);if(k&&(R[P]={...k,...S(Q.validate,k.message)},!r))return H(k.message),R}else if(U(D)){let v={};for(const k in D){if(!N(v)&&!r)break;const L=er(await D[k](t),$,k);L&&(v={...L,...S(k,L.message)},H(L.message),r&&(R[P]=v))}if(!N(v)&&(R[P]={ref:$,...v},!r))return R}}return H(!0),R};function we(e,t){return[...e,...j(t)]}var Ur=e=>{const t=e.constructor&&e.constructor.prototype;return U(t)&&t.hasOwnProperty("isPrototypeOf")},Pe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function q(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Pe&&(e instanceof Blob||e instanceof FileList))&&(r||U(e)))if(t=r?[]:{},!Array.isArray(e)&&!Ur(e))t=e;else for(const s in e)t[s]=q(e[s]);else return e;return t}var ke=e=>Array.isArray(e)?e.map(()=>{}):void 0,Ie=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched});function Se(e,t,r){return[...e.slice(0,t),...j(r),...e.slice(t)]}var De=(e,t,r)=>Array.isArray(e)?(E(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[];function Ce(e,t){return[...j(t),...j(e)]}function Lr(e,t){let r=0;const s=[...e];for(const a of t)s.splice(a-r,1),r++;return ie(s).length?s:[]}var Ee=(e,t)=>E(t)?[]:Lr(e,j(t).sort((r,s)=>r-s)),Re=(e,t,r)=>{e[t]=[e[r],e[r]=e[t]][0]};function Tr(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=E(e)?s++:e[t[s++]];return e}function Mr(e){for(const t in e)if(!E(e[t]))return!1;return!0}function T(e,t){const r=qe(t)?[t]:fr(t),s=r.length==1?e:Tr(e,r),a=r[r.length-1];let l;s&&delete s[a];for(let h=0;h<r.slice(0,-1).length;h++){let d=-1,_;const p=r.slice(0,-(h+1)),w=p.length-1;for(h>0&&(l=e);++d<p.length;){const b=p[d];_=_?_[b]:e[b],w===d&&(U(_)&&N(_)||Array.isArray(_)&&Mr(_))&&(l?delete l[b]:delete e[b]),l=_}}return e}var rr=(e,t,r)=>(e[t]=r,e);function zr(e){const t=me(),{control:r=t.control,name:s,keyName:a="id",shouldUnregister:l}=e,[h,d]=F.useState(r._getFieldArray(s)),_=F.useRef(r._getFieldArray(s).map(X)),p=F.useRef(h),w=F.useRef(s),b=F.useRef(!1);w.current=s,p.current=h,r._names.array.add(s),e.rules&&r.register(s,e.rules);const x=F.useCallback(({values:A,name:m})=>{if(m===w.current||!m){const V=c(A,w.current,[]);d(V),_.current=V.map(X)}},[]);be({callback:x,subject:r._subjects.array});const D=F.useCallback(A=>{b.current=!0,r._updateFieldArray(s,A)},[r,s]),P=(A,m)=>{const V=j(q(A)),S=we(r._getFieldArray(s),V);r._names.focus=pe(s,S.length-1,m),_.current=we(_.current,V.map(X)),D(S),d(S),r._updateFieldArray(s,S,we,{argA:ke(A)})},ee=(A,m)=>{const V=j(q(A)),S=Ce(r._getFieldArray(s),V);r._names.focus=pe(s,0,m),_.current=Ce(_.current,V.map(X)),D(S),d(S),r._updateFieldArray(s,S,Ce,{argA:ke(A)})},ae=A=>{const m=Ee(r._getFieldArray(s),A);_.current=Ee(_.current,A),D(m),d(m),r._updateFieldArray(s,m,Ee,{argA:A})},G=(A,m,V)=>{const S=j(q(m)),z=Se(r._getFieldArray(s),A,S);r._names.focus=pe(s,A,V),_.current=Se(_.current,A,S.map(X)),D(z),d(z),r._updateFieldArray(s,z,Se,{argA:A,argB:ke(m)})},$=(A,m)=>{const V=r._getFieldArray(s);Re(V,A,m),Re(_.current,A,m),D(V),d(V),r._updateFieldArray(s,V,Re,{argA:A,argB:m},!1)},H=(A,m)=>{const V=r._getFieldArray(s);De(V,A,m),De(_.current,A,m),D(V),d(V),r._updateFieldArray(s,V,De,{argA:A,argB:m},!1)},R=(A,m)=>{const V=q(m),S=rr(r._getFieldArray(s),A,V);_.current=[...S].map((z,v)=>!z||v===A?X():_.current[v]),D(S),d([...S]),r._updateFieldArray(s,S,rr,{argA:A,argB:V},!0,!1)},Y=A=>{const m=j(q(A));_.current=m.map(X),D([...m]),d([...m]),r._updateFieldArray(s,[...m],V=>V,{},!0,!1)};return F.useEffect(()=>{if(r._stateFlags.action=!1,Me(s,r._names)&&r._subjects.state.next({}),b.current&&(!Ie(r._options.mode).isOnSubmit||r._formState.isSubmitted))if(r._options.resolver)r._executeSchema([s]).then(A=>{const m=c(A.errors,s),V=c(r._formState.errors,s);(V?!m&&V.type:m&&m.type)&&(m?C(r._formState.errors,s,m):T(r._formState.errors,s),r._subjects.state.next({errors:r._formState.errors}))});else{const A=c(r._fields,s);A&&A._f&&Be(A,c(r._formValues,s),r._options.criteriaMode===W.all,r._options.shouldUseNativeValidation,!0).then(m=>!N(m)&&r._subjects.state.next({errors:dr(r._formState.errors,m,s)}))}r._subjects.watch.next({name:s,values:r._formValues}),r._names.focus&&ye(r._fields,A=>A.startsWith(r._names.focus)),r._names.focus="",r._proxyFormState.isValid&&r._updateValid()},[h,s,r]),F.useEffect(()=>(!c(r._formValues,s)&&r._updateFieldArray(s),()=>{(r._options.shouldUnregister||l)&&r.unregister(s)}),[s,r,a,l]),{swap:F.useCallback($,[D,s,r]),move:F.useCallback(H,[D,s,r]),prepend:F.useCallback(ee,[D,s,r]),append:F.useCallback(P,[D,s,r]),remove:F.useCallback(ae,[D,s,r]),insert:F.useCallback(G,[D,s,r]),update:F.useCallback(R,[D,s,r]),replace:F.useCallback(Y,[D,s,r]),fields:F.useMemo(()=>h.map((A,m)=>({...A,[a]:_.current[m]||X()})),[h,a])}}function Oe(){let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}}var _e=e=>M(e)||!sr(e);function se(e,t){if(_e(e)||_e(t))return e===t;if(te(e)&&te(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const a of r){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const h=t[a];if(te(l)&&te(h)||U(l)&&U(h)||Array.isArray(l)&&Array.isArray(h)?!se(l,h):l!==h)return!1}}return!0}var Ne=e=>{const t=e?e.ownerDocument:0,r=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof r},gr=e=>e.type==="select-multiple",Br=e=>$e(e)||ue(e),Ue=e=>Ne(e)&&e.isConnected;function Ae(e,t={}){const r=Array.isArray(e);if(U(e)||r)for(const s in e)Array.isArray(e[s])||U(e[s])&&!je(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Ae(e[s],t[s])):M(e[s])||(t[s]=!0);return t}function _r(e,t,r){const s=Array.isArray(e);if(U(e)||s)for(const a in e)Array.isArray(e[a])||U(e[a])&&!je(e[a])?E(t)||_e(r[a])?r[a]=Array.isArray(e[a])?Ae(e[a],[]):{...Ae(e[a])}:_r(e[a],M(t)?{}:t[a],r[a]):r[a]=!se(e[a],t[a]);return r}var Le=(e,t)=>_r(e,t,Ae(t)),Ar=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>E(e)?e:t?e===""?NaN:e&&+e:r&&J(e)?new Date(e):s?s(e):e;function Te(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return We(t)?t.files:$e(t)?hr(e.refs).value:gr(t)?[...t.selectedOptions].map(({value:r})=>r):ue(t)?yr(e.refs).value:Ar(E(t.value)?e.ref.value:t.value,e)}var Pr=(e,t,r,s)=>{const a={};for(const l of e){const h=c(t,l);h&&C(a,l,h._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},ne=e=>E(e)?void 0:ge(e)?e.source:U(e)?ge(e.value)?e.value.source:e.value:e,Ir=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function tr(e,t,r){const s=c(e,r);if(s||qe(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const l=a.join("."),h=c(t,l),d=c(e,l);if(h&&!Array.isArray(h)&&r!==l)return{name:r};if(d&&d.type)return{name:l,error:d};a.pop()}return{name:r}}var Nr=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,jr=(e,t)=>!ie(c(e,t)).length&&T(e,t);const qr={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function Wr(e={}){let t={...qr,...e},r={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},s={},a=q(t.defaultValues)||{},l=t.shouldUnregister?{}:q(a),h={action:!1,mount:!1,watch:!1},d={mount:new Set,unMount:new Set,array:new Set,watch:new Set},_,p=0,w={};const b={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={watch:Oe(),array:Oe(),state:Oe()},D=Ie(t.mode),P=Ie(t.reValidateMode),ee=t.criteriaMode===W.all,ae=i=>n=>{clearTimeout(p),p=window.setTimeout(i,n)},G=async i=>{let n=!1;return b.isValid&&(n=t.resolver?N((await m()).errors):await S(s,!0),!i&&n!==r.isValid&&(r.isValid=n,x.state.next({isValid:n}))),n},$=(i,n=[],u,f,y=!0,o=!0)=>{if(f&&u){if(h.action=!0,o&&Array.isArray(c(s,i))){const g=u(c(s,i),f.argA,f.argB);y&&C(s,i,g)}if(b.errors&&o&&Array.isArray(c(r.errors,i))){const g=u(c(r.errors,i),f.argA,f.argB);y&&C(r.errors,i,g),jr(r.errors,i)}if(b.touchedFields&&o&&Array.isArray(c(r.touchedFields,i))){const g=u(c(r.touchedFields,i),f.argA,f.argB);y&&C(r.touchedFields,i,g)}b.dirtyFields&&(r.dirtyFields=Le(a,l)),x.state.next({isDirty:v(i,n),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else C(l,i,n)},H=(i,n)=>{C(r.errors,i,n),x.state.next({errors:r.errors})},R=(i,n,u,f)=>{const y=c(s,i);if(y){const o=c(l,i,E(u)?c(a,i):u);E(o)||f&&f.defaultChecked||n?C(l,i,n?o:Te(y._f)):B(i,o),h.mount&&G()}},Y=(i,n,u,f,y)=>{let o=!1;const g={name:i},O=c(r.touchedFields,i);if(b.isDirty){const I=r.isDirty;r.isDirty=g.isDirty=v(),o=I!==g.isDirty}if(b.dirtyFields&&(!u||f)){const I=c(r.dirtyFields,i);se(c(a,i),n)?T(r.dirtyFields,i):C(r.dirtyFields,i,!0),g.dirtyFields=r.dirtyFields,o=o||I!==c(r.dirtyFields,i)}return u&&!O&&(C(r.touchedFields,i,u),g.touchedFields=r.touchedFields,o=o||b.touchedFields&&O!==u),o&&y&&x.state.next(g),o?g:{}},A=async(i,n,u,f)=>{const y=c(r.errors,i),o=b.isValid&&r.isValid!==n;if(e.delayError&&u?(_=ae(()=>H(i,u)),_(e.delayError)):(clearTimeout(p),_=null,u?C(r.errors,i,u):T(r.errors,i)),(u?!se(y,u):y)||!N(f)||o){const g={...f,...o?{isValid:n}:{},errors:r.errors,name:i};r={...r,...g},x.state.next(g)}w[i]--,b.isValidating&&!Object.values(w).some(g=>g)&&(x.state.next({isValidating:!1}),w={})},m=async i=>t.resolver?await t.resolver({...l},t.context,Pr(i||d.mount,s,t.criteriaMode,t.shouldUseNativeValidation)):{},V=async i=>{const{errors:n}=await m();if(i)for(const u of i){const f=c(n,u);f?C(r.errors,u,f):T(r.errors,u)}else r.errors=n;return n},S=async(i,n,u={valid:!0})=>{for(const f in i){const y=i[f];if(y){const{_f:o,...g}=y;if(o){const O=d.array.has(o.name),I=await Be(y,c(l,o.name),ee,t.shouldUseNativeValidation,O);if(I[o.name]&&(u.valid=!1,n))break;!n&&(c(I,o.name)?O?dr(r.errors,I,o.name):C(r.errors,o.name,I[o.name]):T(r.errors,o.name))}g&&await S(g,n,u)}}return u.valid},z=()=>{for(const i of d.unMount){const n=c(s,i);n&&(n._f.refs?n._f.refs.every(u=>!Ue(u)):!Ue(n._f.ref))&&ve(i)}d.unMount=new Set},v=(i,n)=>(i&&n&&C(l,i,n),!se(Ke(),a)),k=(i,n,u)=>{const f={...h.mount?l:E(n)?a:J(i)?{[i]:n}:n};return cr(i,d,f,u)},L=i=>ie(c(h.mount?l:a,i,e.shouldUnregister?c(a,i,[]):[])),B=(i,n,u={})=>{const f=c(s,i);let y=n;if(f){const o=f._f;o&&(!o.disabled&&C(l,i,Ar(n,o)),y=Pe&&Ne(o.ref)&&M(n)?"":n,gr(o.ref)?[...o.ref.options].forEach(g=>g.selected=y.includes(g.value)):o.refs?ue(o.ref)?o.refs.length>1?o.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(y)?!!y.find(O=>O===g.value):y===g.value)):o.refs[0]&&(o.refs[0].checked=!!y):o.refs.forEach(g=>g.checked=g.value===y):We(o.ref)?o.ref.value="":(o.ref.value=y,o.ref.type||x.watch.next({name:i})))}(u.shouldDirty||u.shouldTouch)&&Y(i,y,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&Fe(i)},K=(i,n,u)=>{for(const f in n){const y=n[f],o=`${i}.${f}`,g=c(s,o);(d.array.has(i)||!_e(y)||g&&!g._f)&&!te(y)?K(o,y,u):B(o,y,u)}},Z=(i,n,u={})=>{const f=c(s,i),y=d.array.has(i),o=q(n);C(l,i,o),y?(x.array.next({name:i,values:l}),(b.isDirty||b.dirtyFields)&&u.shouldDirty&&(r.dirtyFields=Le(a,l),x.state.next({name:i,dirtyFields:r.dirtyFields,isDirty:v(i,o)}))):f&&!f._f&&!M(o)?K(i,o,u):B(i,o,u),Me(i,d)&&x.state.next({}),x.watch.next({name:i})},He=async i=>{const n=i.target;let u=n.name;const f=c(s,u);if(f){let y,o;const g=n.type?Te(f._f):ir(i),O=i.type===fe.BLUR||i.type===fe.FOCUS_OUT,I=!Ir(f._f)&&!t.resolver&&!c(r.errors,u)&&!f._f.deps||Nr(O,c(r.touchedFields,u),r.isSubmitted,P,D),le=Me(u,d,O);C(l,u,g),O?(f._f.onBlur&&f._f.onBlur(i),_&&_(0)):f._f.onChange&&f._f.onChange(i);const Ve=Y(u,g,O,!1),pr=!N(Ve)||le;if(!O&&x.watch.next({name:u,type:i.type}),I)return pr&&x.state.next({name:u,...le?{}:Ve});if(!O&&le&&x.state.next({}),w[u]=(w[u],1),x.state.next({isValidating:!0}),t.resolver){const{errors:ze}=await m([u]),wr=tr(r.errors,s,u),Je=tr(ze,s,wr.name||u);y=Je.error,u=Je.name,o=N(ze)}else y=(await Be(f,c(l,u),ee,t.shouldUseNativeValidation))[u],o=await G(!0);f._f.deps&&Fe(f._f.deps),A(u,o,y,Ve)}},Fe=async(i,n={})=>{let u,f;const y=j(i);if(x.state.next({isValidating:!0}),t.resolver){const o=await V(E(i)?i:y);u=N(o),f=i?!y.some(g=>c(o,g)):u}else i?(f=(await Promise.all(y.map(async o=>{const g=c(s,o);return await S(g&&g._f?{[o]:g}:g)}))).every(Boolean),!(!f&&!r.isValid)&&G()):f=u=await S(s);return x.state.next({...!J(i)||b.isValid&&u!==r.isValid?{}:{name:i},...t.resolver?{isValid:u}:{},errors:r.errors,isValidating:!1}),n.shouldFocus&&!f&&ye(s,o=>c(r.errors,o),i?y:d.mount),f},Ke=i=>{const n={...a,...h.mount?l:{}};return E(i)?n:J(i)?c(n,i):i.map(u=>c(n,u))},Ge=(i,n)=>({invalid:!!c((n||r).errors,i),isDirty:!!c((n||r).dirtyFields,i),isTouched:!!c((n||r).touchedFields,i),error:c((n||r).errors,i)}),mr=i=>{i?j(i).forEach(n=>T(r.errors,n)):r.errors={},x.state.next({errors:r.errors})},br=(i,n,u)=>{const f=(c(s,i,{_f:{}})._f||{}).ref;C(r.errors,i,{...n,ref:f}),x.state.next({name:i,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&f&&f.focus&&f.focus()},Fr=(i,n)=>de(i)?x.watch.subscribe({next:u=>i(k(void 0,n),u)}):k(i,n,!0),ve=(i,n={})=>{for(const u of i?j(i):d.mount)d.mount.delete(u),d.array.delete(u),c(s,u)&&(n.keepValue||(T(s,u),T(l,u)),!n.keepError&&T(r.errors,u),!n.keepDirty&&T(r.dirtyFields,u),!n.keepTouched&&T(r.touchedFields,u),!t.shouldUnregister&&!n.keepDefaultValue&&T(a,u));x.watch.next({}),x.state.next({...r,...n.keepDirty?{isDirty:v()}:{}}),!n.keepIsValid&&G()},xe=(i,n={})=>{let u=c(s,i);const f=he(n.disabled);return C(s,i,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:i}},name:i,mount:!0,...n}}),d.mount.add(i),u?f&&C(l,i,n.disabled?void 0:c(l,i,Te(u._f))):R(i,!0,n.value),{...f?{disabled:n.disabled}:{},...t.shouldUseNativeValidation?{required:!!n.required,min:ne(n.min),max:ne(n.max),minLength:ne(n.minLength),maxLength:ne(n.maxLength),pattern:ne(n.pattern)}:{},name:i,onChange:He,onBlur:He,ref:y=>{if(y){xe(i,n),u=c(s,i);const o=E(y.value)&&y.querySelectorAll&&y.querySelectorAll("input,select,textarea")[0]||y,g=Br(o),O=u._f.refs||[];if(g?O.find(I=>I===o):o===u._f.ref)return;C(s,i,{_f:{...u._f,...g?{refs:[...O.filter(Ue),o,...Array.isArray(c(a,i))?[{}]:[]],ref:{type:o.type,name:i}}:{ref:o}}}),R(i,!1,void 0,o)}else u=c(s,i,{}),u._f&&(u._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&!(ar(d.array,i)&&h.action)&&d.unMount.add(i)}}},vr=(i,n)=>async u=>{u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let f=!0,y=q(l);x.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:o,values:g}=await m();r.errors=o,y=g}else await S(s);N(r.errors)?(x.state.next({errors:{},isSubmitting:!0}),await i(y,u)):(n&&await n({...r.errors},u),t.shouldFocusError&&ye(s,o=>c(r.errors,o),d.mount))}catch(o){throw f=!1,o}finally{r.isSubmitted=!0,x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:N(r.errors)&&f,submitCount:r.submitCount+1,errors:r.errors})}},xr=(i,n={})=>{c(s,i)&&(E(n.defaultValue)?Z(i,c(a,i)):(Z(i,n.defaultValue),C(a,i,n.defaultValue)),n.keepTouched||T(r.touchedFields,i),n.keepDirty||(T(r.dirtyFields,i),r.isDirty=n.defaultValue?v(i,c(a,i)):v()),n.keepError||(T(r.errors,i),b.isValid&&G()),x.state.next({...r}))},Vr=(i,n={})=>{const u=i||a,f=q(u),y=i&&!N(i)?f:a;if(n.keepDefaultValues||(a=u),!n.keepValues){if(n.keepDirtyValues)for(const o of d.mount)c(r.dirtyFields,o)?C(y,o,c(l,o)):Z(o,c(y,o));else{if(Pe&&E(i))for(const o of d.mount){const g=c(s,o);if(g&&g._f){const O=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;try{if(Ne(O)){O.closest("form").reset();break}}catch{}}}s={}}l=e.shouldUnregister?n.keepDefaultValues?q(a):{}:f,x.array.next({values:y}),x.watch.next({values:y})}d={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!b.isValid||!!n.keepIsValid,h.watch=!!e.shouldUnregister,x.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!!(n.keepDefaultValues&&!se(i,a)),isSubmitted:n.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&i?Le(a,i):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:xe,unregister:ve,getFieldState:Ge,_executeSchema:m,_getWatch:k,_getDirty:v,_updateValid:G,_removeUnmounted:z,_updateFieldArray:$,_getFieldArray:L,_subjects:x,_proxyFormState:b,get _fields(){return s},get _formValues(){return l},get _stateFlags(){return h},set _stateFlags(i){h=i},get _defaultValues(){return a},get _names(){return d},set _names(i){d=i},get _formState(){return r},set _formState(i){r=i},get _options(){return t},set _options(i){t={...t,...i}}},trigger:Fe,register:xe,handleSubmit:vr,watch:Fr,setValue:Z,getValues:Ke,reset:(i,n)=>Vr(de(i)?i(l):i,n),resetField:xr,clearErrors:mr,unregister:ve,setError:br,setFocus:(i,n={})=>{const u=c(s,i),f=u&&u._f;if(f){const y=f.refs?f.refs[0]:f.ref;y.focus&&(y.focus(),n.shouldSelect&&y.select())}},getFieldState:Ge}}function Jr(e={}){const t=F.useRef(),[r,s]=F.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});t.current||(t.current={...Wr(e),formState:r});const a=t.current.control;return a._options=e,be({subject:a._subjects.state,callback:F.useCallback(l=>{lr(l,a._proxyFormState,!0)&&(a._formState={...a._formState,...l},s({...a._formState}))},[a])}),F.useEffect(()=>{a._stateFlags.mount||(a._proxyFormState.isValid&&a._updateValid(),a._stateFlags.mount=!0),a._stateFlags.watch&&(a._stateFlags.watch=!1,a._subjects.state.next({})),a._removeUnmounted()}),t.current.formState=ur(r,a),t.current}const Qr=({form:e,onSubmit:t,children:r,className:s,id:a,...l})=>{const h=Qe.exports.useId(),{clearErrors:d,reset:_,handleSubmit:p,formState:w}=e,{isSubmitting:b}=w;return Qe.exports.useEffect(()=>()=>{d(),_()},[d,_]),oe(Dr,{...e,children:oe("form",{noValidate:!0,id:a!=null?a:h,className:s,onSubmit:t?p(t):void 0,...l,children:oe(kr,{as:"fieldset",disabled:b,children:r})})})};export{Gr as C,Qr as F,me as a,Or as b,Jr as c,zr as d,c as g,C as s,Rr as u};
