import{a as e,d as L,ao as Z,r as p,ap as R,ae as ee,j as o,S as s,aV as v,B as f,T as h,U as _,b2 as N,c3 as te,n as x,H as b,c4 as j,c5 as ae,aI as C,aS as T,aU as i,au as Y,I as ne,c as re}from"./index.b3b82eb3.js";import{C as le,A as oe,d as ie,f as de,D as ce,h as se}from"./custom-calender-date-range.bdb82f2b.js";import{T as E}from"./index.d4b9fca0.js";import{H as he}from"./Head.663b461a.js";import{C as ge}from"./custom-accordion.f325e841.js";const ue=n=>e(L,{viewBox:"0 0 24 24",...n,children:e("path",{fill:"currentColor",d:"M20.25 6H16.5v-.75A2.26 2.26 0 0014.25 3h-4.5A2.26 2.26 0 007.5 5.25V6H3.75a1.5 1.5 0 00-1.5 1.5v12a1.5 1.5 0 001.5 1.5h16.5a1.5 1.5 0 001.5-1.5v-12a1.5 1.5 0 00-1.5-1.5zM9 5.25a.75.75 0 01.75-.75h4.5a.75.75 0 01.75.75V6H9v-.75zm5.625 9H12.75v1.875a.75.75 0 11-1.5 0V14.25H9.375a.75.75 0 110-1.5h1.875v-1.875a.75.75 0 111.5 0v1.875h1.875a.75.75 0 110 1.5z"})}),be=n=>e(L,{viewBox:"0 0 24 24",...n,children:e("path",{fill:"currentColor",d:"M16.75 3.56V2c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.5h-6.5V2c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.56c-2.7.25-4.01 1.86-4.21 4.25-.02.29.22.53.5.53h16.92c.29 0 .53-.25.5-.53-.2-2.39-1.51-4-4.21-4.25zM20 9.84H4c-.55 0-1 .45-1 1V17c0 3 1.5 5 5 5h8c3.5 0 5-2 5-5v-6.16c0-.55-.45-1-1-1zM9.21 18.21c-.05.04-.1.09-.15.12-.06.04-.12.07-.18.09-.06.03-.12.05-.18.06-.07.01-.13.02-.2.02-.13 0-.26-.03-.38-.08-.13-.05-.23-.12-.33-.21-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.1-.09.2-.16.33-.21.18-.08.38-.1.58-.06.06.01.12.03.18.06.06.02.12.05.18.09l.15.12c.18.19.29.45.29.71 0 .26-.11.52-.29.71zm0-3.5c-.19.18-.45.29-.71.29-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.28-.28.72-.37 1.09-.21.13.05.24.12.33.21.18.19.29.45.29.71 0 .26-.11.52-.29.71zm3.5 3.5c-.19.18-.45.29-.71.29-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.37-.37 1.05-.37 1.42 0 .18.19.29.45.29.71 0 .26-.11.52-.29.71zm0-3.5l-.15.12c-.06.04-.12.07-.18.09-.06.03-.12.05-.18.06-.07.01-.13.02-.2.02-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.09-.09.2-.16.33-.21.37-.16.81-.07 1.09.21.18.19.29.45.29.71 0 .26-.11.52-.29.71zm3.5 3.5c-.19.18-.45.29-.71.29-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.37-.37 1.05-.37 1.42 0 .18.19.29.45.29.71 0 .26-.11.52-.29.71zm0-3.5l-.15.12c-.06.04-.12.07-.18.09-.06.03-.12.05-.18.06-.07.01-.14.02-.2.02-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.1-.09.2-.16.33-.21.18-.08.38-.1.58-.06.06.01.12.03.18.06.06.02.12.05.18.09l.15.12c.18.19.29.45.29.71 0 .26-.11.52-.29.71z"})}),q="users/report";function fe(n){return R(ee({url:q,method:"get",params:n}))}function me({configs:n,params:c}){const{data:a,...g}=Z({...n,queryFn:()=>fe(c),queryKey:[q,c]}),m=p.exports.useMemo(()=>a==null?void 0:a.patients,[a==null?void 0:a.patients]),u=p.exports.useMemo(()=>a==null?void 0:a.clinicTeam,[a==null?void 0:a.clinicTeam]),t=p.exports.useMemo(()=>a==null?void 0:a.carers,[a==null?void 0:a.carers]);return{patientsReport:m,clinicsReport:u,caretakersReport:t,...g,isLoading:g.isLoading&&g.fetchStatus!=="idle"}}function pe({colorChart:n,title:c,value:a,...g}){return o(s,{direction:"row",align:"center",justify:"space-between",...g,children:[o(v,{spacing:2,children:[e(f,{bg:n,w:"14px",height:"14px",rounded:"full"}),e(h,{textTransform:"capitalize",children:c})]}),e(h,{children:a})]})}le.register(oe,ie,de);function y({data:n}){const[c,a]=p.exports.useState([]),g=p.exports.useRef(null),m=p.exports.useMemo(()=>({type:"doughnut",data:n,options:{responsive:!0,plugins:{legend:{display:!1,position:"bottom",onClick:()=>null}}},plugins:[]}),[n]);return p.exports.useEffect(()=>{var u;if(g.current){const t=(u=g.current.data)==null?void 0:u.datasets[0].data.map((r,l)=>{var z,S,P;const D=(P=(S=(z=g.current)==null?void 0:z.legend)==null?void 0:S.legendItems)==null?void 0:P[l];return{value:r,...D}});a(t||[])}},[]),o(_,{children:[e(f,{maxW:"140px",maxH:"140px",children:e(ce,{ref:g,...m,style:{marginBottom:"24px"}})}),e(f,{w:"full",children:c.length>0&&c.map((u,t)=>e(pe,{colorChart:u.fillStyle,title:u.text,value:u.value,mt:4},t))})]})}function M({children:n,title:c="",icon:a}){return o(s,{padding:{base:4,md:6},spacing:10,bg:"white",rounded:8,children:[o(s,{direction:"row",spacing:{base:2,md:4},align:"center",children:[e(s,{align:"center",justify:"center",w:"48px",height:"48px",bg:"rgba(48, 90, 228, 0.1)",rounded:"full",flexShrink:0,children:a}),e(h,{fontWeight:700,fontSize:{base:"16px",md:"18px",lg:"20px"},color:"secondary",children:c})]}),n]})}function xe({data:n,isLoaded:c,patientsQuantity:a={new:0,total:0}}){const g=[{title:"New Patient",children:e(s,{align:"center",children:e(y,{data:n.dataNewPatientsGender})})},{title:"Total Patient",children:e(s,{align:"center",children:e(y,{data:n.dataTotalPatientsGender})})}],m=[{title:"New Patient",children:o(s,{align:"center",children:["&& ",e(y,{data:n.dataNewPatientsGroup})]})},{title:"Total Patient",children:o(s,{align:"center",children:["&& ",e(y,{data:n.dataTotalPatientsGroup})]})}];return o(N,{columns:{base:1,md:2,lg:3},spacing:6,children:[e(M,{icon:e(te,{fontSize:"24px",color:"primary"}),title:"Patient Overview",children:e(x.Chart,{isLoaded:c,children:o(s,{spacing:10,children:[o(s,{spacing:2,children:[e(h,{pb:"10px",fontWeight:600,fontSize:"18px",color:"secondary",children:"New Patient:"}),e(h,{fontWeight:600,fontSize:"32px",color:"neutral.100",children:a.new})]}),o(s,{spacing:2,children:[e(h,{pb:"10px",fontWeight:600,fontSize:"18px",color:"secondary",children:"Total Patient:"}),e(h,{fontWeight:600,fontSize:"32px",color:"neutral.100",children:a.total})]})]})})}),o(f,{bg:"white",rounded:8,padding:{base:4,lg:6},minH:"400px",children:[e(b,{variant:"title",mb:4,fontSize:{base:"16px",md:"18px",lg:"20px"},children:"Patients by Gender"}),e(x.Chart,{isLoaded:c,isButton:!0,children:n.dataNewPatientsGender.labels&&n.dataNewPatientsGender.labels.length>0?e(E,{tabData:g,tabListProps:{border:"none"},tabItemProps:{color:"neutral.300",_selected:{color:"white",bg:"primary"},padding:2,rounded:4,fontWeight:600,textTransform:"capitalize"}}):e(v,{justify:"center",h:"full",children:e(b,{variant:"title",children:"No Data"})})})]}),o(f,{bg:"white",rounded:8,padding:{base:4,lg:6},minH:"400px",children:[e(b,{variant:"title",mb:4,fontSize:{base:"16px",md:"18px",lg:"20px"},children:"Patients by Group"}),e(x.Chart,{isLoaded:c,isButton:!0,children:n.dataNewPatientsGroup.labels&&n.dataNewPatientsGroup.labels.length>0?e(E,{tabData:m,tabListProps:{border:"none"},tabItemProps:{color:"neutral.300",_selected:{color:"white",bg:"primary"},padding:2,fontWeight:600,rounded:4,textTransform:"capitalize"}}):e(v,{justify:"center",h:"full",children:e(b,{variant:"title",children:"No Data"})})})]})]})}function Ce({data:n,clinicQuantity:c,isLoaded:a}){return o(N,{columns:{base:1,md:2,lg:3},spacing:6,children:[e(M,{icon:e(ue,{fontSize:"24px",color:"#1EDB97"}),title:"Clinic Team Overview",children:e(x.Chart,{isLoaded:a,children:o(s,{spacing:10,children:[o(s,{spacing:2,children:[e(h,{pb:"10px",fontWeight:600,fontSize:"18px",color:"secondary",children:"New Member:"}),e(h,{fontWeight:600,fontSize:"32px",color:"neutral.100",children:c.newClinic})]}),o(s,{spacing:2,children:[e(h,{pb:"10px",fontWeight:600,fontSize:"18px",color:"secondary",children:"Total Member:"}),e(h,{fontWeight:600,fontSize:"32px",color:"neutral.100",children:c.totalClinic})]})]})})}),o(f,{bg:"white",rounded:8,padding:{base:4,lg:6},minH:"400px",children:[e(b,{variant:"title",mb:4,fontSize:{base:"16px",md:"18px",lg:"20px"},children:"New Member by Roles"}),e(x.Chart,{isLoaded:a,children:n.dataNewClinicByRoles.labels&&n.dataNewClinicByRoles.labels.length>0?e(j,{children:e(y,{data:n.dataNewClinicByRoles})}):e(v,{justify:"center",h:"full",children:e(b,{variant:"title",children:"No Data"})})})]}),o(f,{bg:"white",rounded:8,padding:{base:4,lg:6},minH:"400px",children:[e(b,{variant:"title",mb:4,fontSize:{base:"16px",md:"18px",lg:"20px"},children:"Clinic Team by Roles"}),e(x.Chart,{isLoaded:a,children:n.dataTotalClinicByRoles.labels&&n.dataTotalClinicByRoles.labels.length>0?e(j,{children:e(y,{data:n.dataTotalClinicByRoles})}):e(v,{justify:"center",h:"full",children:e(b,{variant:"title",children:"No Data"})})})]})]})}function we({data:n,isLoaded:c,caretakersQuantity:a}){return o(N,{columns:{base:1,md:2,lg:3},spacing:6,children:[e(M,{icon:e(ae,{fontSize:"24px",color:"indicator.300"}),title:"Caretaker Overview",children:e(x.Chart,{isLoaded:c,children:o(s,{spacing:10,children:[o(s,{spacing:2,children:[e(h,{pb:"10px",fontWeight:600,fontSize:"18px",color:"secondary",children:"New Caretaker:"}),e(h,{fontWeight:600,fontSize:"32px",color:"neutral.100",children:a.newCaretakers})]}),o(s,{spacing:2,children:[e(h,{pb:"10px",fontWeight:600,fontSize:"18px",color:"secondary",children:"Total Caretaker:"}),e(h,{fontWeight:600,fontSize:"32px",color:"neutral.100",children:a.totalCaretakers})]})]})})}),o(f,{bg:"white",rounded:8,padding:{base:4,lg:6},minH:"400px",children:[e(b,{variant:"title",mb:4,fontSize:{base:"16px",md:"18px",lg:"20px"},children:"New Caretaker by Gender"}),e(x.Chart,{isLoaded:c,children:n.dataNewCaretakers.labels&&n.dataNewCaretakers.labels.length>0?e(j,{children:e(y,{data:n.dataNewCaretakers})}):e(v,{justify:"center",h:"full",children:e(b,{variant:"title",children:"No Data"})})})]}),o(f,{bg:"white",rounded:8,padding:{base:4,lg:6},minH:"400px",children:[e(b,{variant:"title",mb:4,fontSize:{base:"16px",md:"18px",lg:"20px"},children:"Total Caretaker by Gender"}),e(x.Chart,{isLoaded:c,children:n.dataTotalCaretakers.labels&&n.dataTotalCaretakers.labels.length>0?e(j,{children:e(y,{data:n.dataTotalCaretakers})}):e(v,{justify:"center",h:"full",children:e(b,{variant:"title",children:"No Data"})})})]})]})}const w=n=>n.map(a=>a.trim().charAt(0).toUpperCase()+a.trim().slice(1)),Pe=()=>{var W,O,k,G,H,I,B,A,U;const n=new Date,c={from:C({date:T(n).subtract(4,"day"),format:"YYYY-MM-DD"}),to:C({date:n,format:"YYYY-MM-DD"})},[a,g]=p.exports.useState(c),[m,u]=p.exports.useState(!1),{patientsReport:t,clinicsReport:r,caretakersReport:l,isLoading:D}=me({params:a}),z={labels:t!=null&&t.new.gender?w(Object.keys((W=t==null?void 0:t.new)==null?void 0:W.gender)):[],datasets:[{data:t!=null&&t.new.gender?Object.values((O=t==null?void 0:t.new)==null?void 0:O.gender):[],backgroundColor:[i.primary,i.indicator[100],i.indicator[200]],hoverOffset:1,borderWidth:3}]},S={labels:t!=null&&t.new.gender?w(Object.keys(t==null?void 0:t.total.gender)):[],datasets:[{data:t!=null&&t.total.total?Object.values((k=t==null?void 0:t.total)==null?void 0:k.gender):[],backgroundColor:[i.primary,i.indicator[100],i.indicator[200]],hoverOffset:1,borderWidth:3}]},P={labels:t!=null&&t.new.type?w(Object.keys((G=t==null?void 0:t.new)==null?void 0:G.type).map(d=>d==="rpm"?d.toUpperCase():d)):[],datasets:[{data:t!=null&&t.new.type?Object.values(t==null?void 0:t.new.type):[],backgroundColor:[i.primary,i.indicator[200]],hoverOffset:1,borderWidth:3}]},F={labels:t!=null&&t.total.type?w(Object.keys(t==null?void 0:t.total.type).map(d=>d==="rpm"?d.toUpperCase():d)):[],datasets:[{data:t!=null&&t.total.type?Object.values((H=t==null?void 0:t.total)==null?void 0:H.type):[],backgroundColor:[i.primary,i.indicator[200]],hoverOffset:1,borderWidth:3}]},K={labels:r!=null&&r.new?w(Object.keys((I=r==null?void 0:r.new)==null?void 0:I.role).map(d=>d==="arnp"?d.toUpperCase():d)):[],datasets:[{data:r!=null&&r.new.role?Object.values(r==null?void 0:r.new.role):[],backgroundColor:[i.primary,i.indicator[100],i.indicator[200],i.indicator[300]],hoverOffset:1,borderWidth:3}]},$={labels:r!=null&&r.total.role?w(Object.keys(r==null?void 0:r.total.role).map(d=>d==="arnp"?d.toUpperCase():d)):[],datasets:[{data:r!=null&&r.total.role?Object.values((B=r==null?void 0:r.total)==null?void 0:B.role):[],backgroundColor:[i.primary,i.indicator[100],i.indicator[200],i.indicator[300]],hoverOffset:1,borderWidth:3}]},Q={labels:l!=null&&l.new?w(Object.keys(l==null?void 0:l.new.gender)):[],datasets:[{data:l!=null&&l.new?Object.values((A=l==null?void 0:l.new)==null?void 0:A.gender):[],backgroundColor:[i.primary,i.indicator[100],i.indicator[200],i.indicator[300]],hoverOffset:1,borderWidth:3}]},J={labels:l!=null&&l.total?w(Object.keys(l==null?void 0:l.total.gender)):[],datasets:[{data:l!=null&&l.total?Object.values((U=l==null?void 0:l.total)==null?void 0:U.gender):[],backgroundColor:[i.primary,i.indicator[100],i.indicator[200],i.indicator[300]],hoverOffset:1,borderWidth:3}]},X=[{title:"Patient Reports",panel:({isExpanded:d})=>d&&e(xe,{data:{dataNewPatientsGender:z,dataNewPatientsGroup:P,dataTotalPatientsGender:S,dataTotalPatientsGroup:F},isLoaded:!D,patientsQuantity:{new:(t==null?void 0:t.new.total)||0,total:(t==null?void 0:t.total.total)||0}})},{title:"Caretaker Reports",panel:({isExpanded:d})=>d&&e(we,{data:{dataNewCaretakers:Q,dataTotalCaretakers:J},isLoaded:!D,caretakersQuantity:{newCaretakers:(l==null?void 0:l.new.total)||0,totalCaretakers:(l==null?void 0:l.total.total)||0}})},{title:"Clinic Team Reports",panel:({isExpanded:d})=>d&&e(Ce,{data:{dataNewClinicByRoles:K,dataTotalClinicByRoles:$},isLoaded:!D,clinicQuantity:{newClinic:(r==null?void 0:r.new.total)||0,totalClinic:(r==null?void 0:r.total.total)||0}})}];return o(_,{children:[e(he,{title:"Report "}),o(s,{align:"flex-end",direction:{base:"column-reverse",md:"row"},justify:"space-between",mb:6,children:[o(f,{w:"full",position:"relative",children:[!m&&e(Y,{w:{base:"full",md:"352px"},h:"48px",bg:"white",border:"1px",borderColor:"neutral.400",rounded:8,justifyContent:"flex-end",rightIcon:e(be,{color:"neutral.300",fontSize:20}),cursor:"pointer",_hover:{bg:"neutral.600"},onClick:()=>u(!m),children:o(f,{w:"full",alignContent:"flex-start",children:[e(h,{as:"span",children:`${C({date:a.from||"",format:"DD/MM/YYYY"})} -`}),e(h,{as:"span",children:`${C({date:a.to||"",format:"DD/MM/YYYY"})} `})]})}),m&&e(f,{boxShadow:"1px 0px 4px 1px #ccc",rounded:8,mt:4,bg:"white",maxW:"840px",left:0,right:0,position:"absolute",children:e(se,{initialDate:{from:T(a.from).toDate(),to:T(a.to).toDate()},children:(d,V)=>o(v,{justify:"center",pb:6,children:[e(Y,{size:{base:"md",lg:"lg"},isDisabled:C({date:d,format:"YYYY-MM-DD"})===a.from&&C({date:V,format:"YYYY-MM-DD"})===a.to,onClick:()=>{g({from:C({date:d,format:"YYYY-MM-DD"}),to:C({date:V,format:"YYYY-MM-DD"})}),u(!1)},children:"Apply"}),e(Y,{bg:"neutral.600",size:{base:"md",lg:"lg"},color:"secondary",_hover:{bg:"indicator.400",color:"white"},onClick:()=>{g(a),u(!1)},children:"Cancel"})]})})})]}),e(Y,{leftIcon:e(ne,{src:re.ExcelIcon}),bg:"white",color:"secondary",size:"lg",mb:m?6:0,children:"Export to Excel"})]}),e(s,{spacing:6,children:e(ge,{accordionItems:X,defaultIndex:[0,1,2]})})]})};export{Pe as ReportPage};
